
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Bidoof API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
          </li>
          <li>
            <a href="#authentication-and-first-steps" class="toc-h1 toc-link" data-title="Authentication and first steps">Authentication and first steps</a>
          </li>
          <li>
            <a href="#bidoof-api-methods" class="toc-h1 toc-link" data-title="Bidoof API Methods">Bidoof API Methods</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#provider-api" class="toc-h2 toc-link" data-title="Provider API">Provider API</a>
                  </li>
                  <li>
                    <a href="#consumer-api" class="toc-h2 toc-link" data-title=" Consumer API"> Consumer API</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rate-limit" class="toc-h1 toc-link" data-title="Rate limit">Rate limit</a>
          </li>
          <li>
            <a href="#faq" class="toc-h1 toc-link" data-title="FAQ">FAQ</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://nursejoybot.com'>User & Admin Docs</a></li>
            <li><a href='https://t.me/Pikapiing'>Apply for an API Key</a></li>
            <li><a href='https://detectivepik.ac/api'>Based on Gorochu API</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Bidoof API! You can use our API to access 
Bidoof API endpoints, which can get or submit information of Pokémon GO players on Telegram in NurseJoyBot database.</p>

<p>We have language bindings in <strong>Python</strong>, but you can contribute by adding more languages ​​to the docs. You can view code examples in the dark area to the right, and you could switch in the future the programming language of the examples with the tabs in the top right.</p>
<h1 id='overview'>Overview</h1>
<p>This API is divided on two parts: <strong>Consumer API</strong> and <strong>Provider API</strong>. </p>

<p>If you currently run a bot and want to fetch data from our bot, you only need access to our Provider API, but we recommend you to implement the Consumer API to be able to receive updated data at any time.</p>
<h1 id='authentication-and-first-steps'>Authentication and first steps</h1>
<blockquote>
<p>Example code:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="k">class</span> <span class="nc">BidoofAPI</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">auth_key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'X-BIDOOF-API'</span><span class="p">:</span> <span class="n">auth_key</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s">'{}/test'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">),</span>
            <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__headers</span>
        <span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'api_endpoint_here'</span><span class="c">#Replace</span>
<span class="n">token</span> <span class="o">=</span> <span class="s">'bidoofoofof'</span><span class="c">#Replace</span>
<span class="n">bidoof</span> <span class="o">=</span> <span class="n">BidoofAPI</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
<span class="n">bidoof</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>bidoofoofof</code> with your API key and <code>api_endpoint_here</code> with the endpoint URL provided.</p>
</blockquote>

<p>Bidoof uses API keys to allow access to the API. You can apply a new Bidoof API key sending a PM to my Telegram account <a href="https://t.me/Pikapiing">Telegram account</a>.</p>

<p>If you prefer, you can generate yourself an API Key with a MacOS or GNU/Linux computer generating a randon 64-byte string.</p>

<p><code>LC_ALL=C tr -dc &#39;A-Za-z0-9&#39; &lt;/dev/urandom | head -c 64 ; echo</code></p>

<p><em>¡¡¡Do not forget to send me the API Key to activate it on the server side!!!</em></p>

<aside class="notice">Bidoof expects for the API key to be included in all API requests to the server in a header that looks like the following: <code>X-BIDOOF-API: bidoofoofof</code></aside>

<p>Now you have the API Key and the endpoint, you should start working with the following example on your right.</p>

<p>If everithing is right, you should see on your Terminal, the following JSON response.</p>
<h1 id='bidoof-api-methods'>Bidoof API Methods</h1>
<p>Parameters are always passed directly in the URL for GET methods, or in the payload for POST methods. Data is always returned in JSON format as specified below.</p>
<h2 id='provider-api'>Provider API</h2><h3 id='isregistered-get'>isRegistered() - GET</h3>
<blockquote>
<p>The above method returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"registered"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="s2">"or"</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This method returns wether the user is registered or not.</p>

<p><strong>Arguments</strong></p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>numeric</td>
<td>User&#39;s Telegram id</td>
</tr>
</tbody></table>
<h3 id='isauthorized-get'>isAuthorized() - GET</h3>
<blockquote>
<p>The above method returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"authorized"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"denied, accepted, waiting, or unknown"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This method returns wether the specified user has authorized the data sharing, denied it, is still waiting for an answer or wasn’t requested (or is unknown).</p>

<p>If accepted is returned, it is safe for the consumer bot to fetch data. If denied is returned, the consumer bot must stop asking. If waiting is returned, the consumer bot must just wait. If unknown is returned, the consumer bot can use requestAuthorization() to request authorization.</p>

<p><strong>Arguments</strong></p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>numeric</td>
<td>User&#39;s Telegram id</td>
</tr>
</tbody></table>
<h3 id='requestauthorization-get'>requestAuthorization() - GET</h3>
<blockquote>
<p>The above method returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"requested"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="s2">"or"</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Asks the provider bot to request the user authorization to share data with the consumer bot.</p>

<p><strong>Arguments</strong></p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>numeric</td>
<td>User&#39;s Telegram id</td>
</tr>
</tbody></table>

<aside class="warning">A <code>403 Forbidden</code> error can be returned, meaning the user already denied the data sharing or was already asked so can’t be asked again.</aside>
<h3 id='getdata-get'>getData() - GET</h3>
<blockquote>
<p>The above method returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"numeric"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"trainername"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"team"</span><span class="p">:</span><span class="w"> </span><span class="s2">"valor, mystic, instinct"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"level"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Asks the provider bot the user data. User must have previously authorized the data sharing with the consumer bot, or a 403 Forbidden will be returned instead.</p>

<p><strong>Arguments</strong></p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>numeric</td>
<td>User&#39;s Telegram id</td>
</tr>
</tbody></table>
<h2 id='consumer-api'> Consumer API</h2><h3 id='putdata-post'>putData() - POST</h3>
<blockquote>
<p>The posted JSON will be like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"username"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"trainername"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"team"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"level"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"numeric"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"acknowledged"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="s2">"or"</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>The above method should return JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"acknowledged"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="s2">"or"</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Sends new user data to the consumer bot. If the method replies a 403 Forbidden error, authorization must be revoked for that particular user and bot.</p>

<p><strong>Arguments</strong></p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>numeric</td>
<td>User&#39;s Telegram id</td>
</tr>
<tr>
<td>user</td>
<td>json</td>
<td>Updated user data</td>
</tr>
</tbody></table>
<h1 id='rate-limit'>Rate limit</h1>
<p>Default rate limit for all methods are:</p>

<ul>
<li><em>1000</em> requests <strong>per day</strong></li>
<li><em>300</em> requests <strong>per hour</strong></li>
<li><em>30</em> requests <strong>per min</strong></li>
</ul>

<p>All methods listed in this documentation are subject to the aforementioned limits except the test method. These limits are subject to change at the request of the clients.</p>
<h1 id='faq'>FAQ</h1>
<blockquote>
<p>Class</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="k">class</span> <span class="nc">BidoofError</span><span class="p">(</span><span class="nb">Exception</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre>
<blockquote>
<p>Code snippet</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span> <span class="ow">and</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">201</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">BidoofError</span><span class="p">(</span><span class="s">'Error {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resp</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">is_registered</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s">'{}/isRegistered/{}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">user_id</span><span class="p">),</span>
        <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__headers</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span> <span class="ow">and</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">201</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BidoofError</span><span class="p">(</span><span class="s">'Error {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resp</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'registered'</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</code></pre>
<ul>
<li><strong>What do I need to get an API Key?</strong></li>
</ul>

<p>You must prove the ownership of a project related to the purpose of this API.</p>

<ul>
<li><strong>How should I manage error codes? - Python</strong></li>
</ul>

<p>You should create a class to catch the exception and adding the following code snippet just after the request. On the right side you will have a tiny example.</p>
<h1 id='errors'>Errors</h1>
<aside class="notice">Attention: Maybe you get errors that are not listed here. That error codes can be found over the Net as API error codes.</aside>

<p>The Bidoof API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK!</td>
</tr>
<tr>
<td>201</td>
<td>Data accpeted - User created</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>402</td>
<td>Rejected -- Posted info doesn&#39;t match with local info</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- User hasn&#39;t authorized you.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway</td>
</tr>
<tr>
<td>503</td>
<td>Scheduled Maintenance</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
